# tye application configuration file
# read all about it at https://github.com/dotnet/tye
#
# when you've given us a try, we'd love to know what you think:
#    https://aka.ms/AA7q20u
#
name: simple-microservices
extensions:
  # - name: dapr
  #   log-level: debug
  - name: zipkin
  # - name: seq
  #   logPath: ./.logs

services:
# - name: simplestore-productcatalog-api
#   project: src/Services/ProductCatalog/SimpleStore.ProductCatalogApi/SimpleStore.ProductCatalogApi.csproj
# - name: simplestore-graphql-api
#   project: src/Services/GraphQL/SimpleStore.GraphQLApi/SimpleStore.GraphQLApi.csproj
# - name: simplestore-inventories-api
#   project: src/Services/Inventories/SimpleStore.InventoriesApi/SimpleStore.InventoriesApi.csproj

# - name: redis
#   image: redis
#   bindings:
#     - port: 6379

# - name: simplestore-productcatalog-api
#   executable: start-process powershell.exe -argument -nologo -noprofile -executionpolicy bypass -command dapr run --app-id simplestore-productcatalog-api --app-port 5001 --log-level debug --components-path .\components --config .\components\tracing.yaml dotnet run dotnet -- -p src\Services\ProductCatalog\SimpleStore.ProductCatalogApi'

- name: zipkin
  image: openzipkin/zipkin
  bindings:
    - port: 9411
      containerPort: 9411
      protocol: http

- name: seq
  image: datalust/seq
  env:
    - name: ACCEPT_EULA
      value: "Y"
  bindings:
    - name: ui
      port: 5340
      protocol: http
      containerPort: 80
    - name: internal
      port: 5341